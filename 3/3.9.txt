long shift_left4_rightn(long x, long n) {
  x <<= 4;
  x >>= n;
  return x;
}

shift_left4_rightn:
  movq %rdi, %rax # Get x
  salq $4, %rax   # x <<= 4
  movl %esi, %ecx # Get n (4 bytes)
  sarq %cl, %rax  # x >>= n
