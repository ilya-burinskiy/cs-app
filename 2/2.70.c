int fits_bits(int x, int n) {
  int sign = x >> 31;              // Получаем знак: 0 для положительных, -1 для отрицательных
  x = x ^ sign;                    // Если отрицательное, инвертируем (x = ~x)
  
  int b16, b8, b4, b2, b1, b0, min_bits;
  b16 = !!(x >> 16) << 4;          // Проверяем старшие 16 бит
  x = x >> b16;
  b8 = !!(x >> 8) << 3;            // Следующие 8 бит
  x = x >> b8;
  b4 = !!(x >> 4) << 2;            // Следующие 4 бит
  x = x >> b4;
  b2 = !!(x >> 2) << 1;            // Следующие 2 бит
  x = x >> b2;
  b1 = !!(x >> 1);                 // Следующий 1 бит
  x = x >> b1;
  b0 = x;                          // Последний бит
  min_bits = b16 + b8 + b4 + b2 + b1 + b0 + 1; // +1 для знакового бита
  
  return n - min_bits >= 0;
}
